/*
 *  cartFiller - v0.0.1
 *  Tool for automating cart filling process when doing big purchases
 *  https://andrey012.github.com/cartFiller
 *
 *  Made by Andrey Grinenko
 *  Under MIT License
 */
(function(){(function(a,b){"use strict";var c,d="undefined"!=typeof this.cartFillerConfiguration,e="undefined"!=typeof this.cartFillerEval;if(e&&!d?(b.cartFillerConfiguration={},c=b.cartFillerConfiguration):(this.cartFillerConfiguration={},c=this.cartFillerConfiguration),c.concatenated=d,c.scripts=[],c.launch=function(){"0"===String(c["data-type"])?this.modules.ui.framed(a,b):"1"===String(c["data-type"])?this.modules.ui.popup(a,b):alert("Type not specified, should be 0 for framed, 1 for popup")},c.baseUrl="",c["data-type"]=0,c["data-choose-job"]="",c["data-debug"]=!1,c["data-worker"]="",c.gruntBuildTimeStamp="1456666672151",e)c.baseUrl=this.cartFillerEval[0],c["data-type"]=this.cartFillerEval[1],c["data-choose-job"]=this.cartFillerEval[2],c["data-debug"]=this.cartFillerEval[3],c["data-worker"]=this.cartFillerEval[4];else{var f,g=a.getElementsByTagName("head")[0].getElementsByTagName("script");for(f=0;f<g.length;f++){var h=g[f];if(null!==h.getAttribute("data-type")&&null!==h.getAttribute("data-base-url")&&null!==h.getAttribute("data-choose-job")){for(var i=h.attributes,j=i.length-1;j>=0;j--)/^data-/.test(i[j].name)&&("data-base-url"===i[j].name?c.baseUrl=i[j].value:c[i[j].name]=i[j].value);break}}}if(!d){var k=a.createElement("script");k.setAttribute("src",c.baseUrl+"/boot/helpers/loader.js"),a.getElementsByTagName("head")[0].appendChild(k)}}).call(this,document,window),function(a,b,c){"use strict";var d=this.cartFillerConfiguration;d.scripts.push({getName:function(){return"api"},registerWorker:function(a){return d.modules.dispatcher.registerWorker(a,this),this},result:function(a,b,c){return d.modules.dispatcher.submitWorkerResult(a,b,c),this},skipTask:function(){return d.modules.dispatcher.manageTaskFlow("skipTask"),this},repeatTask:function(){return d.modules.dispatcher.manageTaskFlow("repeatTask"),this},nop:function(){return d.modules.dispatcher.submitWorkerResult("","nop"),this},onload:function(a){return c===a&&(a=function(){d.modules.api.result()}),d.modules.dispatcher.registerWorkerOnloadCallback(a),this},waitFor:function(a,b,e,f){c===e&&(e=2e4),c===f&&(f=200);var g=Math.round(e/f),h=function(){var c=a();!1!==d.modules.dispatcher.getWorkerCurrentStepIndex()&&(c?b(c):(g--,g>0?d.modules.api.setTimeout(h,f):b(!1)))};return d.modules.api.setTimeout(h,f),this},highlight:function(a,b){return d.modules.ui.highlight(a,b),d.modules.dispatcher.setHighlightedElement(a),this},arrow:function(a,b){return d.modules.ui.arrowTo(a,b),d.modules.dispatcher.setHighlightedElement(a),this},say:function(a){return d.modules.ui.say(a),this},each:function(a,b,c){var d,e=!1;if(a instanceof Array){for(d=0;d<a.length;d++)if(!1===b(d,a[d])){e=!0;break}}else for(d in a)if(a.hasOwnProperty(d)&&!1===b(d,a[d])){e=!0;break}!e&&c instanceof Function&&c()},compare:function(a,b){if(a=String(a),b=String(b),a===b)return"";for(var c="[",d=0;d<Math.max(a.length,b.length);d++){if(a.substr(d,1)!==b.substr(d,1)){c+="] <<< expected: ["+a.substr(d)+"], have: ["+b.substr(d)+"]";break}c+=a.substr(d,1)}return c},setTimeout:function(a,b){d.modules.dispatcher.registerWorkerSetTimeout(setTimeout(a,b))},setInterval:function(a,b){d.modules.dispatcher.registerWorkerSetInterval(setInterval(a,b))}})}.call(this,document,window),function(document,window,undefined){"use strict";var worker=!1,workerSrcPretendent="",workerCurrentTask={},workerCurrentTaskIndex=!1,workerCurrentStepIndex=!1,workerOnLoadHandler=!1,workerTimeout=0,workerSetTimeoutIds=[],workerSetIntervalIds=[],workerWatchdogId=!1,resultMessageName=!1,statusMessageName=!1,mainFrameLoaded=!1,workerFrameLoaded=!1,bootstrapped=!1,highlightedElement=!1,jobDetailsCache={},me=this.cartFillerConfiguration,postMessage=function(a,b,c,d){undefined===d&&(d="cartFillerMessage"),undefined===c&&(c={}),c.cmd=b,a.postMessage(d+":"+JSON.stringify(c),"*")},resetWorker=function(){workerCurrentTaskIndex=workerCurrentStepIndex=workerOnLoadHandler=!1},fillWorkerCurrentTask=function(a){for(var b in workerCurrentTask)workerCurrentTask.hasOwnProperty(b)&&delete workerCurrentTask[b];for(var c in a)a.hasOwnProperty(c)&&(workerCurrentTask[c]=a[c])},getLibUrl=function(){return me.baseUrl.replace(/(src|dist)\/?$/,"lib/")},nextTaskFlow,registerWorkerWatchdog=function(){workerWatchdogId&&removeWatchdogHandler(),workerTimeout&&(workerWatchdogId=setTimeout(function(){var a;for(a=0;workerSetTimeoutIds>a;a++)clearTimeout(workerSetTimeoutIds[a]);for(a=0;workerSetIntervalIds>a;a++)clearInterval(workerSetIntervalIds[a]);workerWatchdogId=!1,workerOnLoadHandler=!1,me.modules.api.result("Timeout happened, worker step cancelled")},workerTimeout))},removeWatchdogHandler=function(){workerWatchdogId&&(clearTimeout(workerWatchdogId),workerWatchdogId=!1)};this.cartFillerConfiguration.scripts.push({getName:function(){return"dispatcher"},init:function(){var a=this;window.addEventListener("message",function(b){var c=/^cartFillerMessage:(.*)$/;if(c.test(b.data)){var d=c.exec(b.data),e=JSON.parse(d[1]),f="onMessage_"+e.cmd;undefined!==a[f]&&a[f]instanceof Function?a[f](e,b.source):console.log("unknown message: "+f+":"+b.data)}},!1)},onMessage_register:function(a,b){b===me.modules.ui.workerFrameWindow?(workerFrameLoaded=!0,mainFrameLoaded&&!bootstrapped&&this.bootstrapCartFiller()):b===me.modules.ui.chooseJobFrameWindow&&this.postMessageToChooseJob("bootstrap",{lib:getLibUrl(),testSuite:!0,src:me.baseUrl.replace(/\/$/,"")+"/"},"cartFillerMessage")},onMessage_makeSmaller:function(){me.modules.ui.setSize("small")},onMessage_makeBigger:function(){me.modules.ui.setSize("big")},onMessage_toggleSize:function(){me.modules.ui.setSize()},onMessage_chooseJob:function(){me.modules.ui.showHideChooseJobFrame(!0),this.postMessageToWorker("chooseJobShown")},onMessage_chooseJobCancel:function(){me.modules.ui.showHideChooseJobFrame(!1),this.postMessageToWorker("chooseJobHidden")},onMessage_jobDetails:function(a){resultMessageName=a.resultMessage?a.resultMessage:!1,statusMessageName=a.statusMessage?a.statusMessage:!1,me.modules.ui.showHideChooseJobFrame(!1),a.overrideWorkerSrc=me["data-worker"],workerTimeout=a.timeout,resetWorker();var b;for(b in jobDetailsCache)jobDetailsCache.hasOwnProperty(b)&&delete jobDetailsCache[b];for(b in a)jobDetailsCache[b]=a[b];if(!(a.details instanceof Array)){var c=[];for(b=0;"undefined"!=typeof a.details[b];b++)c.push(a.details[b]);a.details=c}worker={},this.postMessageToWorker("jobDetails",a)},onMessage_sendResult:function(a){me.modules.ui.showHideChooseJobFrame(!0),resultMessageName&&this.postMessageToChooseJob(resultMessageName,a)},onMessage_sendStatus:function(a){statusMessageName&&this.postMessageToChooseJob(statusMessageName,a)},onMessage_loadWorker:function(message){try{workerSrcPretendent=message.src,eval(message.code),resetWorker()}catch(e){throw alert(e),e}},onMessage_updateProperty:function(a){parseInt(a.index)===parseInt(workerCurrentTaskIndex)&&(workerCurrentTask[a.name]=a.value)},onMessage_invokeWorker:function(a){if(!1!==workerCurrentStepIndex){var b="ERROR: worker task is in still in progress";alert(b),this.postMessage("workerStepResult",{index:a.index,step:a.step,result:b})}else{nextTaskFlow="normal",workerCurrentTaskIndex!==a.index&&(fillWorkerCurrentTask(a.details),me.modules.api.arrow().highlight()),workerCurrentTaskIndex=a.index,workerCurrentStepIndex=a.step;var c={taskIndex:a.index,stepIndex:a.step,task:a.details,params:{}};try{if(undefined===worker[a.task])alert("invalid worker - no function for "+a.task+" exist");else if(undefined===worker[a.task][2*a.step+1])alert("invalid worker - function for "+a.task+" step "+a.step+" does not exist");else{var d=worker[a.task][2*a.step+1];if("function"!=typeof d){if("function"!=typeof d[0])return void alert("invalid worker - function for "+a.task+" step "+a.step+" is not a function");c.params=d[1],d=d[0]}registerWorkerWatchdog(),a.debug,d(highlightedElement,c)}}catch(b){if(console.log(b),workerWatchdogId){var e=String(b);e||(e="unknown exception"),me.modules.api.result(e,!1)}throw b}}},onMessage_focusMainFrameWindow:function(){me.modules.ui.focusMainFrameWindow()},onMessage_resetWorker:function(){resetWorker()},onMessage_closePopup:function(){me.modules.ui.closePopup()},onMessage_helloFromPlugin:function(a){this.postMessageToChooseJob(a.message,{})},onMainFrameLoaded:function(a){mainFrameLoaded=!0,workerFrameLoaded&&!bootstrapped&&this.bootstrapCartFiller(),workerOnLoadHandler&&(workerOnLoadHandler(a),workerOnLoadHandler=!1)},postMessageToWorker:function(a,b){postMessage(me.modules.ui.workerFrameWindow,a,b)},postMessageToChooseJob:function(a,b,c){postMessage(me.modules.ui.chooseJobFrameWindow,a,b,c?c:a)},bootstrapCartFiller:function(){bootstrapped=!0,this.postMessageToWorker("bootstrap",{lib:getLibUrl(),debug:me["data-debug"]})},registerWorker:function(a,b){var c=function(a,b){"undefined"==typeof b&&(b=[]);for(var d=0;d<a.length;d++)a[d]instanceof Array&&a[d].length>0&&"string"==typeof a[d][0]?c(a[d],b):b.push(a[d]);return b};workerCurrentTask={};var d=a(me.modules.ui.mainFrameWindow,undefined,b,workerCurrentTask,jobDetailsCache),e={};for(var f in d)d.hasOwnProperty(f)&&(worker[f]=d[f]=c(d[f]));for(f in worker){for(var g=[],h=0;h<worker[f].length;h++)"string"==typeof worker[f][h]&&g.push(worker[f][h]);e[f]=g}this.postMessageToWorker("workerRegistered",{jobTaskDescriptions:e,src:workerSrcPretendent})},manageTaskFlow:function(a){nextTaskFlow=a},submitWorkerResult:function(a,b,c){removeWatchdogHandler();var d;if(undefined===a||""===a)d="ok";else{if("string"!=typeof a)throw"invalid message type "+typeof a;d=b?"skip":"error"}this.postMessageToWorker("workerStepResult",{index:workerCurrentTaskIndex,step:workerCurrentStepIndex,status:d,message:a,response:c,nop:"nop"===b,nextTaskFlow:nextTaskFlow}),workerCurrentStepIndex=workerOnLoadHandler=!1},registerWorkerOnloadCallback:function(a){workerOnLoadHandler=a},getWorkerCurrentStepIndex:function(){return workerCurrentStepIndex},setHighlightedElement:function(a){highlightedElement=a},registerWorkerSetTimeout:function(a){workerSetTimeoutIds.push(a)},registerWorkerSetInterval:function(a){workerSetIntervalIds.push(a)}})}.call(this,document,window),function(a,b){"use strict";var c=["dispatcher","ui","api"],d=this,e=function(){for(var a=c.length-1;a>=0;a--){for(var e=!1,f=d.cartFillerConfiguration.scripts.length-1;f>=0;f--)if(d.cartFillerConfiguration.scripts[f].getName()===c[a]){e=!0;break}if(!e)return}b.cartFillerAPI=function(){return d.cartFillerConfiguration.modules.api},d.cartFillerConfiguration.modules={};for(var g=d.cartFillerConfiguration.scripts.length-1;g>=0;g--){var h=d.cartFillerConfiguration.scripts[g];d.cartFillerConfiguration.modules[h.getName()]=h}d.cartFillerConfiguration.launch()};if(this.cartFillerConfiguration.scripts.push=function(a){Array.prototype.push.call(this,a),e()},!this.cartFillerConfiguration.concatenated)for(var f=a.getElementsByTagName("head")[0],g=c.length-1;g>=0;g--){var h=a.createElement("script");h.setAttribute("src",this.cartFillerConfiguration.baseUrl+"/boot/helpers/"+c[g]+".js"),f.appendChild(h)}}.call(this,document,window),function(a,b,c){"use strict";var d=this.cartFillerConfiguration,e="cartFillerOverlayDiv",f="cartFillerMainFrame",g="cartFillerWorkerFrame",h="cartFillerChooseJobFrame",i=!1,j=[],k=[],l="",m="",n=0,o=!1,p=!1,q="big",r=function(){return p?b:d.modules.ui.mainFrameWindow},s=function(){return"rgba(255,0,0,0.3)"},t=function(){var a=r().document.createElement("div");return a.style.position="fixed",a.style.backgroundColor=s(),a.style.zIndex=Q(),a.className=e,a.onclick=function(){M(!0)},r().document.getElementsByTagName("body")[0].appendChild(a),a},u=function(a,b,c){var d=t();d.style.left=a+"px",d.style.top=b+"px",d.style.width="20px",d.style.height=c+"px"},v=function(a,b,c){var d=t();d.style.left=a+"px",d.style.top=b+"px",d.style.width=c+"px",d.style.height="20px"},w=function(a,b){var c=t();c.style.left=a+"px",c.style.top=b-25+"px",c.style.width=c.style.height="0px",c.style.backgroundColor="transparent",c.style.borderTop=c.style.borderBottom="25px solid transparent",c.style.borderLeft="30px solid rgba(255,0,0,0.3)"},x=function(a,b){var c=t();c.style.left=a-25+"px",c.style.top=b+"px",c.style.width=c.style.height="0px",c.style.backgroundColor="transparent",c.style.borderLeft=c.style.borderRight="25px solid transparent",c.style.borderTop="30px solid rgba(255,0,0,0.3)"},y=function(a,b){if(c!==b.ownerDocument&&c!==b.ownerDocument.defaultView&&c!==b.ownerDocument.defaultView.parent&&b.ownerDocument.defaultView.parent!==b.ownerDocument.defaultView)for(var d=b.ownerDocument.defaultView.parent.document.getElementsByTagName("iframe"),e=d.length-1;e>=0;e--){var f;try{f=d[e].contentDocument}catch(g){}var h;try{h=d[e].contentWindow}catch(g){}if(f===b.ownerDocument||b.ownerDocument!==c&&b.ownerDocument.defaultView===h){var i=d[e].getBoundingClientRect(),j={top:a.top+i.top,bottom:a.bottom+i.top,left:a.left+i.left,right:a.right+i.left,width:a.width,height:a.height};return y(j,d[e])}}return a},z=function(a,b){var c=t();c.style.left=a-25+"px",c.style.top=b+"px",c.style.width=c.style.height="0px",c.style.backgroundColor="transparent",c.style.borderLeft=c.style.borderRight="25px solid transparent",c.style.borderBottom="30px solid rgba(255,0,0,0.3)"},A=function(a){var b,d,e,f,g,h,i,j=!1;for(b=a.length-1;b>=0;b--)h=a[b],i=h.element.getBoundingClientRect(),i=y(i,h.element),i.width>0||i.height>0||i.left>0||i.top>0?(d=Math.round(i.top-5),e=Math.round(i.left-5),g=Math.round(i.height+9),f=Math.round(i.width+9)):h.left=h.right=h.top=h.bottom=c,(d!==h.top||e!==h.left||g!==h.height||f!==h.width)&&(j=!0,h.top=d,h.left=e,h.height=g,h.width=f);return j},B=function(){var a,b,d,e;for(a=j.length-1;a>=0;a--){var f=j[a];if(f.left!==c){var g=t();g.style.backgroundColor="transparent",g.style.borderLeft=g.style.borderTop=g.style.borderRight=g.style.borderBottom="5px solid rgba(255,0,0,0.3)",g.style.left=f.left+"px",g.style.top=f.top+"px",g.style.width=f.width+"px",g.style.height=f.height+"px",g.style.boxSizing="border-box",f.left>40?(b=f.top+Math.round(f.height/2),u(0,0,b-10),v(0,b-10,f.left-30),w(f.left-30,b)):f.top>40?(d=f.left+Math.min(30,Math.round(f.width/2)),v(0,0,d-10),u(d-10,0,f.top-30),x(d,f.top-30)):(d=f.left+Math.min(30,Math.round(f.width/2)),e=f.top+f.height,v(0,e+60,d+10),u(d-10,e+30,30),z(d,e))}}},C=function(a,b){var d,e,f,g,h,i,j,k=[a,b];for(e=k.length-1;e>=0;e--)if(c!==k[e])for(d=k[e].length-1;d>=0;d--)j=k[e][d],f=c===f?j.left:Math.min(f,j.left),h=c===h?j.left+j.width:Math.max(h,j.left+j.width),g=c===g?j.top:Math.min(g,j.top),i=c===i?j.top+j.height:Math.max(i,j.top+j.height);return{left:f,right:h,top:g,bottom:i}},D=function(a){var b;for(b=a.length-1;b>=0;b--)a[b].left=a[b].top=a[b].width=a[b].height=c},E=function(){var a=C(k);if(a.left!==c){var b=d.modules.ui.mainFrameWindow.innerHeight,e=d.modules.ui.mainFrameWindow.innerWidth,f=5;K(0,0,Math.max(0,a.left-f),b),K(Math.min(e,a.right+f),0,e,b),K(Math.max(0,a.left-f),0,Math.min(e,a.right+f),Math.min(b,a.top-f)),K(Math.max(0,a.left-f),Math.max(0,a.bottom+f),Math.min(e,a.right+f),b)}},F=function(){var a=C(j,k);if(a.left!==c&&("string"==typeof l&&l.length>0||"string"!=typeof l&&c!==l&&null!==l&&!isNaN(l))){var b=r().document.createElement("div");b.style.display="block",b.style.backgroundColor="#fff",b.style.padding="10px",b.style.fontSize="20px;",b.style.zIndex=Q()+1,b.style.border="#bbb solid 10px",b.style.borderRadius="20px",b.style.overflow="auto",b.style.visibility="hidden",b.style.top=a.bottom+5+"px",b.style.left=Math.max(0,Math.round((a.left+a.right)/2)-o)+"px",b.style.width=o+"px",b.style.height="auto",b.style.position="fixed",b.style.fontSize="20px",b.className=e,b.textContent=l,b.onclick=function(){M(!0)},r().document.getElementsByTagName("body")[0].appendChild(b),n=100,d.modules.ui.adjustMessageDiv(b),m=l}},G=function(){try{var a=A(j),b=A(k),c=m!==l;(a||b||c)&&(M(),B(),E(),F())}catch(d){}},H={width:!1,height:!1,outerWidth:!1,outerHeight:!1,workerFrameSize:!1},I=function(){var a=b.innerWidth,c=b.innerHeight,e=p?!1:b.outerWidth,f=p?!1:b.outerHeight;(H.width!==a||H.height!==c||H.outerWidth!==e||H.outerHeight!==f||H.workerFrameSize!==q)&&(!function(){var b=.8*a-1,g=.2*a-1,h=.8*a-1,i=.2*a-1,j=c-15,k=.02*a+(p?0:200),l=.76*a-(p?0:200),m=.02*c,n=.96*c;p&&(d.modules.ui.mainFrame.style.height=j+"px"),d.modules.ui.workerFrame.style.height=j+"px",d.modules.ui.chooseJobFrame.style.height=n+"px",d.modules.ui.chooseJobFrame.style.top=m+"px",d.modules.ui.chooseJobFrame.style.left=k+"px",d.modules.ui.chooseJobFrame.style.width=l+"px","big"===q?p?(d.modules.ui.workerFrame.style.width=h+"px",d.modules.ui.mainFrame.style.width=g+"px",d.modules.ui.workerFrame.style.left=g+"px"):(d.modules.ui.mainFrameWindow.resizeTo(1,1),d.modules.ui.workerFrame.style.width=h+"px",d.modules.ui.workerFrame.style.left=a-h-5+"px"):"small"===q&&(p?(d.modules.ui.workerFrame.style.width=i+"px",d.modules.ui.mainFrame.style.width=b+"px",d.modules.ui.workerFrame.style.left=b+"px"):(d.modules.ui.mainFrameWindow.resizeTo(Math.round(.8*e-10),Math.round(f)),d.modules.ui.workerFrame.style.width=i+"px",d.modules.ui.workerFrame.style.left=a-i-5+"px"))}(),H.width=a,H.height=c,H.outerWidth=e,H.outerHeight=f,H.workerFrameSize=q)},J=function(){return d.modules.ui.mainFrameWindow.document},K=function(a,b,c,d){a=Math.round(a),b=Math.round(b),c=Math.round(c),d=Math.round(d);var f=J().createElement("div");f.style.position="fixed",f.style.left=a+"px",f.style.top=b+"px",f.style.width=c-a+"px",f.style.height=d-b+"px",f.style.backgroundColor="rgba(0,0,0,0.3)",f.style.zIndex=Q(),f.className=e,f.onclick=function(){M(!0)},J().getElementsByTagName("body")[0].appendChild(f)},L=function(a){var b,e,f,g,h,i,j,k=d.modules.ui.mainFrameWindow.innerHeight,l=d.modules.ui.mainFrameWindow.innerWidth;a.length>0&&"function"==typeof a[0].element.scrollIntoView&&a[0].element.scrollIntoView();for(var m=1e3;m&&(A(a),b=C(a),g=Math.round((b.right+b.left)/2),j=Math.round((b.bottom+b.top)/2),!(c!==e&&g>=e&&f>=g&&j>=h&&i>=j));m--)e=c===e?g:Math.min(e,g),f=c===f?g:Math.max(f,g),h=c===h?j:Math.min(h,j),i=c===i?j:Math.max(i,j),d.modules.ui.mainFrameWindow.scrollBy(g-Math.round(l/2),j-Math.round(k/2));D(a)},M=function(a){var b,c=J().getElementsByClassName(e);for(b=c.length-1;b>=0;b--)c[b].parentNode.removeChild(c[b]);for(c=r().document.getElementsByClassName(e),b=c.length-1;b>=0;b--)c[b].parentNode.removeChild(c[b]);!0===a&&(j=k=[],l="")},N=function(){return d.baseUrl+"/index"+(d.concatenated?".min":"")+".html"+(d.gruntBuildTimeStamp?"?"+d.gruntBuildTimeStamp:"")},O=!1,P=!1,Q=function(){return 1e7};setInterval(G,200),setInterval(I,2e3),d.scripts.push({getName:function(){return"ui"},setSize:function(){},showHideChooseJobFrame:function(a){a&&!i&&(this.chooseJobFrameWindow.location.href=d["data-choose-job"],i=!0),this.chooseJobFrame.style.display=a?"block":"none",this.setSize(a?"big":"small")},closePopup:function(){},focusMainFrameWindow:function(){},highlight:function(a,b){l="";var d,e=this.mainFrameWindow.document.getElementsByTagName("body")[0];if(e.style.paddingBottom=this.mainFrameWindow.innerHeight+"px",k=[],null!==a&&"object"==typeof a&&"string"==typeof a.jquery&&c!==a.length&&"function"==typeof a.each)a.each(function(a,c){return k.push({element:c}),b?void 0:!1});else if(a instanceof Array)for(d=a.length-1;d>=0&&(k.push({element:a[d]}),!0===b);d--);else c!==a&&k.push({element:a});k.length>0&&setTimeout(function(){L(k)},0)},arrowTo:function(a,b){if(j=[],null!==a&&"object"==typeof a&&"string"==typeof a.jquery&&c!==a.length&&"function"==typeof a.each)a.each(function(a,c){return j.push({element:c}),b?void 0:!1});else if(a instanceof Array)for(var d=0;d<a.length&&(j.push({element:a[d]}),b);d++);else c!==a?j.push({element:a}):(j=[],M(!0));j.length>0&&setTimeout(function(){L(j)},0)},say:function(a){l=c===a?"":a,o=Math.max(100,Math.round(.5*this.mainFrameWindow.innerWidth)),n=100},adjustMessageDiv:function(a){var b=this;setTimeout(function(){var c=!0;if(n>0){c=!1;var d=a.getBoundingClientRect();d.bottom>b.mainFrameWindow.innerHeight?d.width>.95*b.mainFrameWindow.innerWidth?d.top-(P-O)-10<.05*b.mainFrameWindow.innerHeight?c=!0:b.mainFrameWindow.scrollBy(0,Math.round(.05*b.mainFrameWindow.innerHeight)):o=Math.min(b.mainFrameWindow.innerWidth,parseInt(a.style.width.replace("px",""))+Math.round(.04*b.mainFrameWindow.innerWidth)):c=!0,c?(a.style.visibility="visible",n=0):(n--,D(j),D(k))}},0)},popup:function(a,b){d.modules.dispatcher.init(),this.mainFrameWindow=b.open(b.location.href,"_blank","resizable=1, height=1, width=1, scrollbars=1"),this.closePopup=function(){this.mainFrameWindow.close()},this.focusMainFrameWindow=function(){this.mainFrameWindow.focus()};try{this.mainFrameWindow.addEventListener("load",function(){d.modules.dispatcher.onMainFrameLoaded()},!0)}catch(e){}var f=this;setTimeout(function j(){try{f.mainFrameWindow.document&&"complete"===f.mainFrameWindow.document.readyState&&d.modules.dispatcher.onMainFrameLoaded(!0)}catch(a){}setTimeout(j,100)},100);for(var i=b.document.getElementsByTagName("body")[0];i.children.length;)i.removeChild(i.children[0]);this.setSize=function(a){c===a&&(a="big"===q?"small":"big"),q=a,I(),"small"===a&&this.mainFrameWindow.focus()},this.workerFrame=b.document.createElement("iframe"),this.workerFrame.setAttribute("name",g),this.workerFrame.style.position="fixed",this.workerFrame.style.top="0px",this.workerFrame.style.height="100%",this.workerFrame.style.zIndex="100000",i.appendChild(this.workerFrame),this.workerFrameWindow=b.frames[g],this.workerFrameWindow.location.href=N(),this.chooseJobFrame=b.document.createElement("iframe"),this.chooseJobFrame.setAttribute("name",h),this.chooseJobFrame.style.position="fixed",this.chooseJobFrame.style.height="0px",this.chooseJobFrame.style.top="0px",this.chooseJobFrame.style.left="0px",this.chooseJobFrame.style.width="0px",this.chooseJobFrame.style.zIndex="1000000",this.chooseJobFrame.style.background="white",i.appendChild(this.chooseJobFrame),this.chooseJobFrameWindow=b.frames[h],this.setSize("big")},framed:function(a,b){p=!0,d.modules.dispatcher.init();for(var e=a.getElementsByTagName("body")[0],i=b.location.href;e.children.length;)e.removeChild(e.children[0]);this.mainFrame=a.createElement("iframe"),this.mainFrame.setAttribute("name",f),this.mainFrame.style.height="0px",this.mainFrame.style.position="fixed",this.mainFrame.style.left="0px",this.mainFrame.style.top="0px",this.mainFrame.style.borderWidth="0px",this.workerFrame=a.createElement("iframe"),this.workerFrame.setAttribute("name",g),this.workerFrame.style.height="0px",this.workerFrame.style.position="fixed",this.workerFrame.style.top="0px",this.chooseJobFrame=a.createElement("iframe"),this.chooseJobFrame.setAttribute("name",h),this.chooseJobFrame.style.display="none",this.chooseJobFrame.style.height="0px",this.chooseJobFrame.style.top="0px",this.chooseJobFrame.style.left="0px",this.chooseJobFrame.style.width="0px",this.chooseJobFrame.style.position="fixed",this.chooseJobFrame.style.background="white",e.appendChild(this.mainFrame),this.mainFrameWindow=b.frames[f],this.mainFrame.onload=function(){d.modules.dispatcher.onMainFrameLoaded()},this.mainFrameWindow.location.href=i,e.appendChild(this.workerFrame),this.workerFrameWindow=b.frames[g],this.workerFrameWindow.location.href=N(),e.appendChild(this.chooseJobFrame),this.chooseJobFrameWindow=b.frames[h],this.setSize=function(a){c===a&&(a="big"===q?"small":"big"),q=a,I()},this.setSize("big")}})}.call(this,document,window)}).call({cartFillerConfiguration:{},cartFillerEval:this.cartFillerEval});