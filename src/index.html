<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CartFiller</title>
    <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.min.css"/>
    <style>#jobDetails .btn {font-family: monospace; font-size: 12px;} #jobDetails .btn-xs {margin: 5px 7px;  font-size: 12px;} </style>
</head>
<body ng-controller="indexController">
    <div id="buttonPanel"
         style="text-align: right; z-index: 101; position: fixed; top: 0px; width: 100%; padding: 2px;" 
         class="alert alert-warning"
         ng-repeat="dummy in [0]">
        <a href="#" class="btn btn-info btn-xs" ng-click="toggleSize()">[]</a>
        <a href="#"
           ng-if="running"
           class="btn btn-xs btn-danger"
           onclick="var event = arguments[0] || window.event; return angular.element(this).scope().stopNoWatch(event);"
           ng-disabled="!workerSrc"
           >Stop</a>
        <a href="#"
           id="runButton"
           ng-if="!running"
           class="btn btn-xs btn-success"
           title="Run"
           ng-disabled="workerInProgress || !workerSrc"
           onclick="var event = arguments[0] || window.event; return angular.element(this).scope().runNoWatch(false, event);"
           disabled="disabled"
           >&gt;&gt;&gt;</a>
        <a href="#"
           ng-if="!running"
           class="btn btn-xs btn-info"
           title="Slow"
           ng-disabled="workerInProgress || !workerSrc"
           onclick="var event = arguments[0] || window.event; return angular.element(this).scope().runNoWatch(true, event);"
           >&gt;..&gt;</a>
        <a href="#"
           class="btn btn-xs btn-info"
           title="Step"
           ng-disabled="workerInProgress || !workerSrc"
           onclick="var event = arguments[0] || window.event; return angular.element(this).scope().clickOnNextStepNoWatch(event);"
           >&gt;</a>
        <a href="#" 
           id="chooseJobButton"
           class="btn btn-info btn-xs"
           ng-click="chooseJob()"
           onclick="return false;"
           >{{chooseJobState ? 'Cancel' : 'Choose Job'}}</a>
        <a href="#"
           class="btn btn-info btn-xs"
           ng-click="clickOnReturnResult($event)"
           onclick="return false;"
           ng-if="!chooseJobState"
           >Result</a>
        <a href="#"
           class="btn btn-default btn-active btn-xs"
           ng-click="reloadWorker($event)"
           title="Reload worker"
           ng-if="debugEnabled"
           onclick="return false;"
           >R</a>
        <div ng-style="{opacity: (workerInProgress ? 1 : 0)}">
            <a href="#"
               id="resetWorkerButton"
               class="btn btn-danger btn-xs"
               onclick="var event = arguments[0] || window.event; return angular.element(this).scope().resetWorkerNoWatch();">RESET WORKER</a>
        </div>
    </div>
    <div ng-if="chooseJobState" id="cartFillerOverlay" style="z-index: 100; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); position: absolute; top: 0px; left: 0px;">

    </div>
    <div id="jobDetails" style="margin-top: 100px;">
        <div id="{{'taskDiv_' + jobTaskIndex}}"
             class="alert"
             ng-class="jobTaskProgress[jobTaskIndex].complete ? 'alert-success' : 'alert-danger'"
             ng-repeat="(jobTaskIndex, jobTask) in jobDetails track by $index"
             ng-click="toggleTaskProgress(jobTaskIndex)"
        >
            <span><strong>{{jobTitleMap[jobTask.task] ? jobTitleMap[jobTask.task] : jobTask.task}}</strong></span>
            <div ng-repeat="(propertyName, propertyValue) in jobTask" ng-if="propertyName != 'task' && propertyValue.toString().length">
                <span>{{jobTitleMap[propertyName] ? jobTitleMap[propertyName] : propertyName}}</span>
                <input type="text" readonly="readonly" value="{{propertyValue}}" ng-click="selectTaskInput(jobTaskIndex, $event);" title="{{propertyName}}"/>
            </div>
            <div>
                <span
                   ng-repeat="(jobTaskStepIndex, jobTaskStep) in jobTaskDescriptions[jobTask.task] track by $index"
                >
                    <a id="{{'stepButton_' + jobTaskIndex + '_' + jobTaskStepIndex}}"
                       href="#"
                       title="{{jobTaskStep + ': ' + jobTaskProgress[jobTaskIndex].stepResults[jobTaskStepIndex].message}}"
                       class="btn"
                       ng-class="getStepClass(jobTaskIndex, jobTaskStepIndex)"
                       onclick="var event = arguments[0] || window.event; return angular.element(this).scope().clickOnStepNoWatch(this, event);"
                    >{{indexTitles[jobTask.task][jobTaskStepIndex]}}</a>
                    {{jobTaskProgress[jobTaskIndex].stepResults[jobTaskStepIndex].message}}
                </span>
            </div>
        </div>
        <div class="alert alert-warning"
             ng-style="{opacity : (finishReached ? 1 : 0)}"
             id="finishReached"
             >
            Completed
        </div>
    </div>
    <script data-main="scripts/main" src="../lib/requirejs/require.js"></script>
</body>
</html>
