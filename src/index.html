<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CartFiller</title>
    <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.min.css"/>
</head>
<body ng-controller="indexController">
    <div style="text-align: right; z-index: 101; position: fixed; top: 0px; width: 100%; padding: 2px;" class="alert alert-warning">

        <a href="#" class="btn btn-info btn-xs" ng-click="toggleSize()">[]</a>
        <a href="#"
           ng-if="running"
           ng-click="stop($event)"
           class="btn btn-xs btn-danger"
           onclick="return false;"
           >Stop</a>
        <a href="#"
           ng-if="!running"
           ng-click="run(false, $event)"
           class="btn btn-xs btn-success"
           title="Run"
           ng-disabled="workerInProgress"
           onclick="return false;"
           >&gt;&gt;&gt;</a>
        <a href="#"
           ng-if="!running"
           ng-click="run(true)"
           class="btn btn-xs btn-info"
           title="Slow"
           ng-disabled="workerInProgress"
           onclick="return false;"
           >&gt;..&gt;</a>
        <a href="#"
           ng-click="clickOnNextStep($event);"
           class="btn btn-xs btn-info"
           title="Step"
           ng-disabled="workerInProgress"
           onclick="return false;"
           >&gt;</a>
        <a href="#" 
           class="btn btn-info btn-xs" 
           ng-click="chooseJob()"
           >{{chooseJobState ? 'Cancel' : 'Choose Job'}}</a>
        <a href="#" 
           class="btn btn-default btn-active btn-xs" 
           ng-click="reloadWorker($event)" 
           title="Reload worker"
           ng-if="debugEnabled"
           onclick="return false;"
           >R</a>
        <div ng-style="{opacity: (workerInProgress ? 1 : 0)}">
            <a href="#" class="btn btn-danger btn-xs" ng-click="resetWorker()">RESET WORKER</a>
        </div>
    </div>
    <div ng-if="chooseJobState" id="cartFillerOverlay" style="z-index: 100; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); position: absolute; top: 0px; left: 0px;">

    </div>
    <div id="jobDetails" style="margin-top: 50px;">
        <div class="alert" 
             ng-class="jobTaskProgress[jobTaskIndex].complete ? 'alert-success' : 'alert-danger'" 
             ng-repeat="(jobTaskIndex, jobTask) in jobDetails track by $index" 
             ng-click="toggleTaskProgress(jobTaskIndex)"
        >
            <span><strong>{{jobTitleMap[jobTask.task] ? jobTitleMap[jobTask.task] : jobTask.task}}</strong></span>
            <div ng-repeat="(propertyName, propertyValue) in jobTask" ng-if="propertyName != 'task' && propertyValue.toString().length">
                <span>{{jobTitleMap[propertyName] ? jobTitleMap[propertyName] : propertyName}}</span>
                <input type="text" readonly="readonly" value="{{propertyValue}}" ng-click="selectTaskInput(jobTaskIndex, $event);"/>
            </div>
            <div>
                <span
                   ng-repeat="(jobTaskStepIndex, jobTaskStep) in jobTaskDescriptions[jobTask.task] track by $index" 
                >
                    <a 
                       href="#"
                       title="{{jobTaskStep + ': ' + jobTaskProgress[jobTaskIndex].stepResults[jobTaskStepIndex]}}"
                       class="btn"
                       ng-class="getStepClass(jobTaskIndex, jobTaskStepIndex)"
                       ng-click="clickOnStep(jobTaskIndex, jobTaskStepIndex, $event)"
                       ng-disabled="workerInProgress"
                       onclick="return false;"
                    >{{jobTaskStepIndex + 1}}</a>
                    {{jobTaskProgress[jobTaskIndex].stepResults[jobTaskStepIndex].message}}
                </span>
            </div>
        </div>
    </div>
    <script data-main="scripts/main" src="../lib/requirejs/require.js"></script>
</body>
</html>
